# Actions.

**Actions.** est la plateforme cr√©er pour le projet  {EPITECH.} - AREA. Un clone d'IFTTT. Le but de ce projet est de cr√©er une plateforme dans laquelle on peut cr√©er des modules d'Actions-R√©action.

Le projet est d√©velopp√© 6 √©tudiants d'{EPITECH.} :
- Alexandre PEREIRA
- Hugo POISOT
- Rom√©o TALOVICI
- Sitpi RAJENDRAN
- Thomas DALEM
- Tony MARINI


Il est compos√© de trois parties:
 1. BackEnd
 2. Application Web
 3. Application Mobile

Les diff√©rentes parties sont bas√© sur diff√©rentes technologie :`NodeJs` pour le serveur backend, `ReactJS` l'application FrontEnd, et `Flutter` pour l'application mobile.

# BackEnd - API
Pour utiliser notre API vous pouvez utiliser notre syst√®me gr√¢ce aux syst√®mes d'envoie POST et GET.

## User Routes - '/'

 **‚Äò/register‚Äô : permet de register un user**

    POST
    Body : id, email, password, username, token, refreshToken
    Return value : renvoie 200 avec le user et un bearer token si celui ci a bien √©t√© ajout√© et login ou 400 avec le message d‚Äôerreur si il y a eu une erreur

  /

 **‚Äò/login‚Äô : permet de login un user**

    POST
    Body : email, password
    Return value : 201 avec le user et un bearer token si l‚Äôemail et mot de passe sont valide et que le user existe, 400 sinon

 /

**‚Äò/mobileRegistration : permet de register/login un user pour oauth mobile**
    POST
    BODY : id, email, displayName, token, refreshToken
    Return value: 201 avec le user et un bearer token si le user a bien √©t√© enregistr√© ou qu'il a bien √©t√© login

**‚Äò/getUserInfo‚Äô : permet de r√©cup√©r√© les info du user**

    GET
    Header: n√©cessite un bearer token
    Valeur de retour : renvoie le user
/

**‚Äò/getServiceToken‚Äô: r√©cup√®re tous les token de service du user**

    GET
    Header : n√©cessite un bearer token
    Valeur de retour : un tableau contenant dans chaque case le nom du service, le token et une data li√© au token (un mail dans le cas de outlook et google par exemple)

/


**‚Äò/removeServiceToken‚Äô : retire un token de service du user**

    POST
    Header : n√©cessite un bearer token
    Body : le nom du service
    Valeur de retour : 200 avec comme contenu ‚Äúsuccess‚Äù en cas de r√©ussite et 404 sinon

/

**‚Äò/addServiceToken‚Äô : ajoute un token de service au user**

    POST
    Header : n√©cessite un bearer token
    Body : un nom de service, un token d‚Äôacc√®s, un token de refresh et un mail si besoins
    Valeur de retour : 200 avec ‚Äúsuccess‚Äù si l‚Äôajout marche et 404 sinon

/

 **‚Äò/addIntraToken‚Äô: ajoute un token de service ‚ÄòIntra‚Äô au user**

    POST
    Header : n√©cessite un bearer token
    Body : un token trouvable sur l‚Äôintranet (lien d‚Äôautologin) et un email (celui de l‚Äôutilisateur)
    Valeur de Retour : 200 avec ‚Äúsuccess‚Äù si l‚Äôajout marche et que le token est valide, 401 si le token ou l‚Äôadresse est invalide ou que l‚Äôajout ne marche pas

/

 **‚Äò/addOutlookToken: ajoute un token de service ‚ÄòOutlook‚Äô au user**

    POST
    Header : n√©cessite un bearer token
    Body : un token, un email et un refresh token
    Valeur de Retour : 200 avec ‚Äúsuccess‚Äù si l‚Äôajout marche, 404 si l‚Äôajout ne marche pas

/

**‚Äò/addOutlookToken‚Äô : ajoute un token de service ‚ÄòOutlook‚Äô au user**

    POST
    Header : n√©cessite un bearer token
    Body : un token, un email
    Valeur de Retour : 200 avec ‚Äúsuccess‚Äù si l‚Äôajout marche 401 sinon

/


**‚Äò/addGoogleToken‚Äô : ajoute token de service ‚ÄòGoogle‚Äô au user**

    POST
    Header : n√©cessite un bearer token
    Body : un token, un email
    Valeur de Retour : 200 avec ‚Äúsuccess‚Äù si l‚Äôajout marche 401 sinon

/


**‚Äò/addSpotifyToken‚Äô : ajoute token de service Spotify au user**

    POST
    Header : n√©cessite un bearer token
    Body : un token, un email
    Valeur de Retour : 200 avec ‚Äúsuccess‚Äù si l‚Äôajout marche 401 sinon

  /

**‚Äò/removeUserById‚Äô: retire un user par rapport √† son ID**

    POST
    Header : n√©cessite un bearer token
    Body : l‚Äôid du user que l‚Äôon veut supprimer
    Valeur de retour : 200 si le user a bien √©t√© retir√©, 404 sinon

  /

**‚Äò/removeUserByEmail‚Äô: retire un user par rapport √† son mail**

    POST
    Header : n√©cessite un bearer token
    Body : le mail du user que l‚Äôon veut supprimer
    Valeur de retour : 200 si le user a bien √©t√© retir√©, 404 sinon

## Area Routes - **‚Äò/area‚Äô**
**‚Äò/addArea‚Äô : ajoute une Area √† un user**

    POST
    Header : n√©cessite un bearer token
    Body : Le nom de service d‚ÄôAction, les param√®tre de l‚Äôaction (actionParameter), le nom du service de Reaction et les param√®tre de la r√©action (reactionParameter)
    Valeur de retour : 201 et un json de l‚ÄôArea si l‚Äôajout a march√©, 400 sinon

/

**‚Äò/removeArea‚Äô : retire une Area √† un user**

    POST
    Header : n√©cessite un bearer token
    Body : l‚Äôid de l‚ÄôArea √† retirer
    Valeur de retour : 200 avec un json ‚Äúsuccess‚Äù si l‚ÄôArea a bien √©t√© retir√© et 400 sinon

/

**‚Äò/modifyArea‚Äô: modifie une Area d‚Äôun user**

    POST
    Header : n√©cessite un bearer token
    Body : L'ID de l'Area, le nom de service d‚ÄôAction, les param√®tre de l‚Äôaction (actionParameter), le nom du service de Reaction et les param√®tre de la r√©action (reactionParameter)
    Valeur de retour : 200 et un json de l‚ÄôArea si la modification a march√©, 400 sinon

/

**‚Äò/getArea‚Äô : renvoie les d√©tails d‚Äôune Area**

    GET
    Header : n√©cessite un bearer token
    Body : l‚Äôid de l‚ÄôArea dont on veut les d√©tails
    Valeur de retour : 200 avec les d√©tails de l‚Äôarea ou 400 sinon

/

**‚Äò/getUserArea‚Äô: renvoie toute les Area d‚Äôun user**

    GET
    Header : n√©cessite un bearer token
    Valeur de retour : 200 avec les une liste avec les d√©tails de toutes les area associ√© au user ou 400 sinon


## Oauth 2.0 - **‚Äò/oauth‚Äô**

**‚Äò/login/outlook‚Äô :** Permet de se login avec outlook, retourne vers ‚Äòlocalhost:3000‚Äô quand l‚Äôauthentification est finis et ajoute le user si il n‚Äôexistait pas ou le login

**‚Äò/login/google‚Äô :** Permet de se login avec google, retourne vers ‚Äòlocalhost:3000‚Äô quand l‚Äôauthentification est finis et ajoute le user si il n‚Äôexistait pas ou le login

**‚Äò/login/spotify‚Äô :** Permet de se login avec spotify, retourne vers ‚Äòlocalhost:3000‚Äô quand l‚Äôauthentification est finis et ajoute le user si il n‚Äôexistait pas ou le login

**‚Äò/getTempUser‚Äô :** Permet de r√©cup√©rer un user stocker temporairement suite √† l‚Äôutilisation d‚Äôun login oauth (les 3 requ√™tes au dessus)

## Outlook route : ‚Äò/outlook‚Äô

**‚Äò/getUserEmailFolder‚Äô :** renvoie tout les dossier de la boit email outlook du user (qui poss√®de un service outlook)

    GET
    Header: n√©cessite un bearer token
    Valeur de retour: un tableau contenant le nom du dossier et son id

##   Google route : ‚Äò/google‚Äô
**‚Äò/getAllSubscription‚Äô :** renvoie tous les abonnements d‚Äôun utilisateur (qui poss√®de un service google)

    GET
    Header: n√©cessite un bearer token
    Valeur de retour : renvoie une liste avec le nom de la cha√Æne, son id et un lien vers sont thumbnails


# Web Application

Afin d'utiliser l'application WEB il vous faut cr√©er un compte et √™tre connect√©.

## Cr√©er un compte
Il y'a trois mani√®re de cr√©er un compte sur notre plateforme WEB :
 - Mail + Mot de Passe
	 -
	Arriv√© sur la page d'accueil vous pouvez cliquer sur le bouton en haut √† droite ***"S'Inscrire"*** 
	*ou* allez sur la page `/register`
	Il vous faudra :

		  - Un Nom d'utilisateur
		  - Un Email
		  - Un Mot de passe
- Cr√©e un compte Google
	-
	Vous n'avez pas besoin de cr√©er un compte, il va √™tre automatiquement cr√©√© lors de la premi√®re connexion
- Cr√©e un compte Outlook
	-
	Vous n'avez pas besoin de cr√©er un compte, il va √™tre automatiquement cr√©√© lors de la premi√®re connexion


## Se connecter

Pour la connexion, il faut √™tre sur la page d'accueil, vous aurez trois fa√ßons de vous connecter :
- **Mail et Mot de Passe**

    Remplir les deux champs pr√©sents avec le mail et le mot de passe utilis√© lors de l'inscription

- **Connexion avec Google**

    Cliquer sur le bouton "Se connecter avec Google", et accepter les conditions sur les pages de Google

- **Connexion avec Outlook**

    Cliquer sur le bouton "Se connecter avec Outlook", et accepter les conditions sur les pages de Outlook



## Cr√©er un AREA

**Une fois connect√©,** vous arrivez sur la page avec touts vos AREAs. Dans le menu √† gauche, vous trouverez le menu dans laquelle se trouve le bouton `Cr√©er une AREA`
> **Note:** Vous ne pouvez **pas acc√©der ** √† la page si vous n'√™tes pas connect√©.

Vous choisissez votre Actions, parmi la liste propos√©, celle-ci peut varier en fonction des services auquelles vous √™tes abonn√©s *(cf : S'abonner aux Services)*

Ensuite, vous devez remplir les param√®tres n√©cessaires

> **Note:** Certaines n'ont pas de param√®tres üòâ

D√©sormais, vous pouvez choisir votre r√©actions, que doit-il se passer lorsque votre actions est activ√© : vous choisissez la r√©action que vous souhaites dans la liste propos√©. Et remplissez les param√®tres demand√©s.

## Modifier une AREA

Pour modifier une AREA, selectionnez l'icone "edit" repr√©sent√© par un stylo sur l'area souhait√©, puis modifiez la √† votre guise.

> **Note:** La modification d'une AREA peut prendre du temps √† √™tre effective, jusqu'√† environ 30min - 1H.

## Supprimer une AREA
Pour modifier une AREA, selectionnez l'icone "supprimer" repr√©sent√© par une poubelle sur l'area souhait√©, puis modifiez la √† votre guise.

> **Note:** Supprimer une AREA est d√©finitif, pour la r√©cup√©rer vous devrez la recr√©er enti√®rement.

## S'abonner et se D√©sabonner des services
Pour s'abonner, et donc acceder aux AREAS d'un ou plusieurs services, rendez vous dans la page mes services.
Cliquez sur le service souhait√©, si vous ne l'√™tes pas d√©j√†, connectez vous, vous aurez par la suite la possibilit√©e de cr√©er des AREAS li√©s √† ces services !!

> **Note:** Gardez √† l'esprit que si vous vchoisissez de vous d√©connecter d'un service dont vous utilisez les AREAS, celles-ci ne fonctionneront plus.

# Application Mobile


## Cr√©er un compte
Si vous n'avez pas de compte cr√©ez en un ! Il vous faudra pour cela remplir seulement 3 champs. Votre Nom, Mail et votre mot de passe. Ne vous inquietez pas, il est impossible pour nous de voir votre mot de passe, il est crypt√© par l'application mobile, juste apr√®s votre validation.

> **Note:** Si vous n'avez pas de compte, mais que vous souhaitez vous connectez avec par exemple votre compte Google, ne cr√©ez PAS de compte, connectez vous directement avec votre compte Google.

![Alt text](Documentations/resources/register.png?raw=true "Register")

## Se connecter
Si vous avez cr√©√© un compte, connectez vous avec les champs textes. Si vous voulez vous connecter avec un autre compte comme Google, assurez vous que le bouton soit disponible en dessous du bouton Login. Si c'est le cas vous pourrez cliquez dessus, une invitation √† vous connecter sur une page internet s'ouvrira, connectez vous.

![Alt text](Documentations/resources/signin.png?raw=true "Sign In")

> **Note:** Pour le moment seulement la connection avec Google est authoris√©.

## Ajouter une AREA
Pour ajouter une AREA, cliquez sur le bouton en bas a droite repr√©sentant un '+'. Une page va alors s'ouvrir. Dans le champs "quand" selectionnez l'acttion qui lancera votre AREA, et dans la rubrique "alors" selectionnez ce qui devra se passer lorsque votre "quand" se produira.

![Alt text](Documentations/resources/creation.png?raw=true "Cr√©ation")

## Modifier une AREA
Pour modifier une AREA, appuyez sur l'AREA souhait√©. Modifiez la √† votre guise, puis terminez.

> **Note:** Il peut y avoir un temps entre la modification d'une AREA et la modification effective.

## Supprimer une AREA
Sur l'AREA souhait√©, cliquez sur l'icone "supprimer" repr√©sent√© par une poubelle.

> **Note:** Supprimer une AREA est d√©finitif, pour la r√©cup√©rer vous devrez la recr√©er enti√®rement.

## S'abonner √† un service
Pour s'abonner √† un service, rendez vous dans l'onglet service, pui selectionnez, et connectez vous au service souhait√©.

> **Note:** Il est possible qu'il y'ai un temps d'attente avant que vous ne puissiez utiliser les AREA de ce service.

![Alt text](Documentations/resources/messervices.png?raw=true "Mes Services")

